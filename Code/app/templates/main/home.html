<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-bootstrap lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-bootstrap lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-bootstrap lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
{% import "bootstrap/wtf.html" as wtf %}
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>School-Home</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <!-- Main Style Sheet -->
    <link rel="stylesheet" href="../../static/css/main.css">
    <link rel="stylesheet" href="../../static/css/home.css">
    <!-- Modernizr -->
    <script src="../../static/js/vendor/modernizr-2.6.2.min.js"></script>
    <!-- Respond.bootstrap for IE 8 or less only -->
    <!--[if (lt IE 9) & (!IEMobile)]>
    <script src="bootstrap/vendor/respond.min.bootstrap"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGOu1MCWVAvOQ24l6-tOdRpXgKXEDWvYs&libraries=places&language=en">
    </script>

</head>
<body class="products">
{% import "_macro.html" as macros %}

<!--[if lte IE 7]>
<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
    your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to
    improve your experience.</p>
<![endif]-->

{% include 'base.html' %}

<main role="main">

    <!-- INTRO SECTION -->
    <section id="welcome" class="jumbotron">
        <div class="container">

            <div class="search-bar">
                <form role="form" method="post">
                    {{ form.hidden_tag() }}
                    {# {{ wtf.form_errors(form, hiddens="only") }}#}
                    <div class="row">

                        <div class="form-group rightLine col-lg-2 col-sm-2 col-md-2">
                            <input type="text" name="location" placeholder="Your City" value="Co.Dublin"
                                   readonly="readonly" id="location">
                            <label for="location" class="location"><i class="fa fa-dot-circle-o"></i></label>
                        </div>
                        <div class="form-group rightLine col-lg-2  col-sm-2 col-md-2">
                            <div class="btn-group bootstrap-select listing-categories dropdown">
                                <button class="btn dropdown-toggle bs-placeholder btn-default" type="button"
                                        id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true"
                                        aria-expanded="true"><span id="locationtext">Dublin 4</span></button>
                                <ul class="dropdown-menu locationLink" aria-labelledby="dropdownMenu1">
                                    <li><p>Dublin 2</p></li>
                                    <li role="separator" class="divider"></li>
                                    <li><p>Dublin 4</p></li>
                                    <li role="separator" class="divider"></li>
                                    <li><p>Dublin 6</p></li>
                                    <li role="separator" class="divider"></li>
                                    <li><p>Dublin 8</p></li>
                                </ul>
                            </div>
                        </div>

                        <div class="form-group col-lg-6  col-sm-6 col-md-6">

                            {{ wtf.form_field(form.search, class='search') }}
                        </div>
                        <div class="form-group col-lg-2  col-sm-2 col-md-2">
                            <input type="submit" value="Search" class="submit">
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </section>


    <div class="container">

        <div class="page-header">
            {% for message in get_flashed_messages() %}
                <div class="alert alert-warning">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    {{ message }}
                </div>
            {% endfor %}
            <h4>Welcome to Best Choice</h4>
            <h4>{% if current_user.is_authenticated %} Hello, {{ current_user.username }}!{% endif %}</h4>
            <h1>Post-Primary Schools
                <small>Sorted by current distance by default</small>
            </h1>
        </div>

        <div class="row">
            <div id="mapholder" class="grid-options col-sm-4" style="height: 500px">

            </div><!-- Google Map area -->

            <script>
                $(function () {
                    var id = '';
                    var placeID = [];
                    {% for school in schools %}
                        placeID.push('{{ school.place_id }}')
                    {% endfor %}

                    console.log(placeID)

                    initMap(placeID);//执行函数


                    $("#map").on("mouseover", ".marker-container", function () {
                        $(this).find(".detail-info").show();
                    });

                    $("#map").on("mouseout", ".marker-container", function () {
                        $(this).find(".detail-info").hide();
                    });
                });
            </script>


            <div class="products-grid col-sm-8">
                <div class="row">
                    <!-- first row -->
                    {% if schools %}
                        {% for school in schools %}
                            <div class="product-item col-xs-6 col-md-4">
                                <a href="{{ url_for('.school_detail', roll_number=school.roll_number, official_school_name=school.official_school_name) }}">
                                    {% if school.photo_ref1 %}
                                        <img style="height: 150px;"
                                             src="https://maps.googleapis.com/maps/api/place/photo?maxwidth=400&photoreference={{ school.photo_ref1 }}&key=AIzaSyDL_YVLa4qg-Pi4Q_W_10e1Kiih_b8Hmv0"
                                             alt="sample school"/>
                                    {% else %}
                                        <img style="height: 150px;" src="../../static/img/search/not_found.png"
                                             alt="sample school"/>
                                    {% endif %}
                                </a>

                                <h2 style="font-weight:bold"><a class="{{ school.place_id }}" href="javascript:void(0)"
                                                                onclick="showLocation(this)">{{ school.official_school_name }}</a>
                                </h2>
                                <p><span style="font-weight:bold;color: black">Enrolment:</span>
                                    Boys: {{ school.total_boy }}
                                    Girls: {{ school.total_girl }} (2017/18); </p>

                                <span style="font-weight:bold;color: black">Address:</span>
                                <p>{{ school.address }}</p>

                                <p><span style="font-weight:bold;color: black">Fees:</span> {{ school.fee }}</p>

                                {% if school.Total_progression %}
                                    <p><span
                                            style="font-weight:bold;color: black">University going-rate(2017):</span> {{ school.Total_progression*100 }}%
                                    </p>
                                {% else %}
                                    <p><span style="font-weight:bold;color: black">University going-rate(2017):</span>
                                        No Data</p>
                                {% endif %}
                            </div>
                        {% endfor %}
                    {% endif %}

                </div>

                <div class="row pagination-wrap">
                    {% if pagination %}
                        <ul class="pagination">
                            {{ macros.pagination_widget(pagination, '.index') }}
                        </ul>
                    {% endif %}
                </div><!-- /.row.pagination-wrap -->

            </div><!-- /.products-grid -->

        </div><!-- /.row -->
    </div><!-- /.container -->
</main>
<footer role="contentinfo">
    <div class="container">
        <div class="row">

            <div class="col-sm-4 col-md-2">
                <h3>Content</h3>
                <ul>
                    <li><a href="#">content1</a></li>
                    <li><a href="#">content2</a></li>
                    <li><a href="#">content3</a></li>
                    <li><a href="#">content4</a></li>
                    <li><a href="#">content5</a></li>
                </ul>
            </div>
            <div class="col-sm-4 col-md-2">
                <h3>Styles</h3>
                <ul>
                    <li><a href="#">StyleA</a></li>
                    <li><a href="#">StyleB</a></li>
                    <li><a href="#">StyleC</a></li>
                    <li><a href="#">StyleD</a></li>
                    <li><a href="#">StyleE</a></li>
                </ul>
            </div>
            <div class="col-sm-4 col-md-2">
                <h3>Other</h3>
                <ul>
                    <li><a href="#">Link</a></li>
                    <li><a href="#">Another link</a></li>
                    <li><a href="#">Link again</a></li>
                    <li><a href="#">Try this</a></li>
                    <li><a href="#">Don't you dare</a></li>
                </ul>
            </div>

            <!-- Add the extra clearfix for only the required viewport -->
            <div class="clearfix visible-sm"></div>

            <div class="about col-sm-12 col-md-6">
                <h3>About Us</h3>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse euismod congue bibendum. Aliquam
                    erat volutpat. Phasellus eget justo lacus. Vivamus pharetra ullamcorper massa, nec ultricies metus
                    gravida egestas. Duis congue viverra arcu, ac aliquet turpis rutrum a. Donec semper vestibulum
                    dapibus. Integer et sollicitudin metus. Vivamus at nisi turpis. Phasellus vel tellus id felis cursus
                    hendrerit.</p>
                <p><a class="btn btn-default btn-xs pull-right" href="#">Learn more <span
                        class="fa fa-arrow-circle-right"></span></a></p>
            </div>
        </div><!-- /.row -->

        <ul class="social">
            <li><a href="#" title="Twitter Profile"><span class="icon fa fa-twitter"></span></a></li>
            <li><a href="#" title="Facebook Page"><span class="icon fa fa-facebook"></span></a></li>
            <li><a href="#" title="LinkedIn Profile"><span class="icon fa fa-linkedin"></span></a></li>
            <li><a href="#" title="Google+ Profile"><span class="icon fa fa-google-plus"></span></a></li>
            <li><a href="#" title="GitHub Profile"><span class="icon fa fa-github-alt"></span></a></li>
        </ul>

        <p class="footer-brand"><a href="index.html"><img src="../../static/img/logo.png" width="80"
                                                          alt="Bootstrappin'"></a></p>

    </div><!-- /.container -->
</footer>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="../../static/js/vendor/jquery-1.10.2.min.js"><\/script>')</script>


<!-- Holder.bootstrap for project development only -->
<script src="../../static/js/vendor/holder.js"></script>

<!-- Essential Plugins and Main JavaScript File -->
<script src="../../static/js/plugins.js"></script>
<script src="../../static/js/main.js"></script>


{#<script language="JavaScript">#}
{#function refresh()#}
{#{#}
{#window.location.reload();#}
{#}#}
{#setTimeout('refresh()',5000); //指定1秒刷新一次#}
{#</script>#}

<!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
    var _gaq = [['_setAccount', 'UA-XXXXX-X'], ['_trackPageview']];
    (function (d, t) {
        var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
        g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g, s)
    }(document, 'script'));
</script>

</body>
</html>